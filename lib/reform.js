// Generated by CoffeeScript 1.3.3
(function() {
  var CheckBox, Reform, SelectBox, _ref;

  if ((_ref = window.$) == null) {
    window.$ = require("jquery-commonjs");
  }

  CheckBox = require("./checkbox");

  SelectBox = require("./selectbox");

  Reform = (function() {

    function Reform() {}

    Reform.prototype.process = function(node) {
      var cls, control, n, _ref1, _results;
      _ref1 = Reform.controls;
      _results = [];
      for (cls in _ref1) {
        control = _ref1[cls];
        _results.push((function() {
          var _i, _len, _ref2, _results1;
          _ref2 = $(node).parent().find("." + cls);
          _results1 = [];
          for (_i = 0, _len = _ref2.length; _i < _len; _i++) {
            n = _ref2[_i];
            _results1.push(new control(n));
          }
          return _results1;
        })());
      }
      return _results;
    };

    Reform.prototype.observe = function() {
      var _this = this;
      $(document).on("ready", function() {
        return _this.process("body");
      });
      return $(document).on("DOMNodeInserted", function(e) {
        return _this.process(e.target);
      });
    };

    return Reform;

  })();

  Reform.controls = {
    "reform-checkbox": CheckBox,
    "reform-selectbox": SelectBox
  };

  module.exports = Reform;

}).call(this);
